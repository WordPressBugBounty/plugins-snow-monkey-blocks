(()=>{var e,o={3669:(e,o,s)=>{"use strict";const t=window.wp.blocks,l=JSON.parse('{"UU":"snow-monkey-blocks/categories-list","uK":{"OZ":{"A":5},"rE":{"A":""},"q5":{"A":""},"fq":{"A":""}}}'),n=window.ReactJSXRuntime,r=(0,n.jsxs)("svg",{viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,n.jsx)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"})]});var i=s(6942),a=s.n(i);const c=window.lodash,d=window.wp.components,u=window.wp.blockEditor,_=window.wp.data,g=window.wp.element,m=window.wp.i18n,p=(e,o=0,s=null)=>(e=Number(e),(isNaN(e)||e<o)&&(e=o),null!==s&&e>s&&(e=s),e),b=window.wp.dataControls,{UU:h}=l,x={articleCategories:{}},y={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,b.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return y.setArticleCategories(e)}},k={*getArticleCategories(){yield y.fetchArticleCategories()}},w=(0,_.createReduxStore)(h,{reducer:(e=x,o)=>"SET_ARTICLE_CATEGORIES"===o.type?{...e,articleCategories:o.articleCategories}:e,actions:y,selectors:{getArticleCategories:e=>e.articleCategories},controls:b.controls,resolvers:k});(0,_.register)(w),(0,t.registerBlockType)(l.UU,{icon:{foreground:"#cd162c",src:r},edit:function({attributes:e,setAttributes:o,className:s}){const{articles:t,exclusionCategories:r,orderby:i,order:b}=e,h=(0,g.useRef)(),x=(0,_.useSelect)((e=>e(w).getArticleCategories()));if(!x||!x.length)return(0,n.jsx)("div",{...(0,u.useBlockProps)(),children:(0,n.jsxs)(d.Placeholder,{icon:"editor-ul",label:(0,m.__)("Categories list","snow-monkey-blocks"),children:[(0,n.jsx)(d.Spinner,{}),(0,m.__)("Loading setting data","snow-monkey-blocks")]})});const y=(e,o)=>{let s=[];return null!=r&&(s=r.split(",")),e?s.push(o):s=(0,c.remove)(s,(e=>o!==e)),(0,c.compact)((0,c.union)(s)).join(",")},k=()=>x.map((e=>(0,n.jsx)(d.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.name,value:String(e.id),checked:-1!==(0,c.indexOf)(r.split(","),String(e.id)),onChange:s=>{o({exclusionCategories:y(s,String(e.id))})}},e.id))),v=a()("smb-categories-list",s),f=()=>{const e=x.map((e=>e.count>0&&-1===(0,c.indexOf)(r.split(","),String(e.id))?(0,n.jsxs)("li",{className:"smb-categories-list__item",children:[(0,n.jsxs)("div",{className:"smb-categories-list__item__count",children:[e.count,(0,n.jsx)("span",{children:(0,m.__)("articles","snow-monkey-blocks")})]}),(0,n.jsxs)("div",{className:"smb-categories-list__item__detail",children:[(0,n.jsx)("div",{className:"smb-categories-list__item__category-name",children:e.name}),e.description&&(0,n.jsx)("div",{className:"smb-categories-list__item__category-description",children:e.description}),(0,n.jsx)("div",{className:"smb-categories-list__item__recent-label",children:(0,m.__)("Recent posts","snow-monkey-blocks")}),(0,n.jsx)("ul",{className:"smb-categories-list__item__list",children:(0,n.jsx)("li",{children:(0,m.__)("Only the actual contribution screen is displayed","snow-monkey-blocks")})})]})]},e.id):null)).filter((e=>e));return(0,n.jsx)("div",{className:v,children:(0,n.jsx)("ul",{className:"smb-categories-list__list",ref:h,children:e.filter((e=>e))})})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.InspectorControls,{children:[(0,n.jsx)(d.__experimentalToolsPanel,{label:(0,m.__)("Block settings","snow-monkey-blocks"),children:(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>t!==l.uK.OZ.A,isShownByDefault:!0,label:(0,m.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>o({articles:l.uK.OZ.A}),children:(0,n.jsx)(d.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("Categories list articles","snow-monkey-blocks"),value:t,onChange:e=>o({articles:p(e,1,5)}),min:"1",max:"5"})})}),(0,n.jsx)(d.__experimentalToolsPanel,{label:(0,m.__)("Exclusion categories settings","snow-monkey-blocks"),children:(0,n.jsxs)(d.__experimentalToolsPanelItem,{hasValue:()=>r!==l.uK.rE.A,isShownByDefault:!0,label:(0,m.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>o({exclusionCategories:l.uK.rE.A}),children:[(0,n.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,m.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")}),(0,n.jsx)("div",{style:{display:"grid",gap:"16px"},children:(0,n.jsx)(k,{})})]})}),(0,n.jsxs)(d.__experimentalToolsPanel,{label:(0,m.__)("Display order settings","snow-monkey-blocks"),children:[(0,n.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,m.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")}),(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>i!==l.uK.q5.A,isShownByDefault:!0,label:(0,m.__)("orderby","snow-monkey-blocks"),onDeselect:()=>o({orderby:l.uK.q5.A}),children:(0,n.jsx)(d.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("orderby","snow-monkey-blocks"),value:i,options:[{label:(0,m.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,m.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,m.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,m.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,m.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>o({orderby:e})})}),(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>b!==l.uK.fq.A,isShownByDefault:!0,label:(0,m.__)("order","snow-monkey-blocks"),onDeselect:()=>o({order:l.uK.fq.A}),children:(0,n.jsx)(d.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("order","snow-monkey-blocks"),value:b,options:[{label:(0,m.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,m.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>o({order:e})})})]})]}),(0,n.jsx)("div",{...(0,u.useBlockProps)(),children:(0,n.jsx)(f,{})})]})},save:function(){return null}})},6942:(e,o)=>{var s;!function(){"use strict";var t={}.hasOwnProperty;function l(){for(var e="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(e=r(e,n(s)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var s in e)t.call(e,s)&&e[s]&&(o=r(o,s));return o}function r(e,o){return o?e?e+" "+o:e+o:e}e.exports?(l.default=l,e.exports=l):void 0===(s=function(){return l}.apply(o,[]))||(e.exports=s)}()}},s={};function t(e){var l=s[e];if(void 0!==l)return l.exports;var n=s[e]={exports:{}};return o[e](n,n.exports,t),n.exports}t.m=o,e=[],t.O=(o,s,l,n)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,l,n]=e[d],i=!0,a=0;a<s.length;a++)(!1&n||r>=n)&&Object.keys(t.O).every((e=>t.O[e](s[a])))?s.splice(a--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=l();void 0!==c&&(o=c)}}return o}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,l,n]},t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={6769:0,3109:0};t.O.j=o=>0===e[o];var o=(o,s)=>{var l,n,[r,i,a]=s,c=0;if(r.some((o=>0!==e[o]))){for(l in i)t.o(i,l)&&(t.m[l]=i[l]);if(a)var d=a(t)}for(o&&o(s);c<r.length;c++)n=r[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},s=globalThis.webpackChunk=globalThis.webpackChunk||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var l=t.O(void 0,[3109],(()=>t(3669)));l=t.O(l)})();