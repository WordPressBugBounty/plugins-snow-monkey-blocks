(()=>{var e,o={3669:(e,o,s)=>{"use strict";const t=window.wp.blocks,r=JSON.parse('{"UU":"snow-monkey-blocks/categories-list","uK":{"OZ":{"A":5},"rE":{"A":""},"q5":{"A":""},"fq":{"A":""}}}'),n=window.ReactJSXRuntime,l=(0,n.jsxs)("svg",{viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,n.jsx)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"})]});var i=s(6942),a=s.n(i);const c=window.lodash,d=window.wp.components,u=window.wp.blockEditor,_=window.wp.data,m=window.wp.element,g=window.wp.i18n,p=(e,o=0,s=null)=>(e=Number(e),(isNaN(e)||e<o)&&(e=o),null!==s&&e>s&&(e=s),e),b=window.wp.dataControls,{UU:h}=r,y={articleCategories:{}},x={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,b.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return x.setArticleCategories(e)}},k={*getArticleCategories(){yield x.fetchArticleCategories()}},w=(0,_.createReduxStore)(h,{reducer:(e=y,o)=>"SET_ARTICLE_CATEGORIES"===o.type?{...e,articleCategories:o.articleCategories}:e,actions:x,selectors:{getArticleCategories:e=>e.articleCategories},controls:b.controls,resolvers:k});(0,_.register)(w),(0,t.registerBlockType)(r.UU,{icon:{foreground:"#cd162c",src:l},edit:function({attributes:e,setAttributes:o,className:s}){const{articles:t,exclusionCategories:l,orderby:i,order:b}=e,h=(0,m.useRef)(),y=(0,_.useSelect)((e=>e(w).getArticleCategories()));if(!y||!y.length)return(0,n.jsx)("div",{...(0,u.useBlockProps)(),children:(0,n.jsxs)(d.Placeholder,{icon:"editor-ul",label:(0,g.__)("Categories list","snow-monkey-blocks"),children:[(0,n.jsx)(d.Spinner,{}),(0,g.__)("Loading setting data","snow-monkey-blocks")]})});const x=(e,o)=>{let s=[];return null!=l&&(s=l.split(",")),e?s.push(o):s=(0,c.remove)(s,(e=>o!==e)),(0,c.compact)((0,c.union)(s)).join(",")},k=()=>y.map((e=>(0,n.jsx)(d.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.name,value:String(e.id),checked:-1!==(0,c.indexOf)(l.split(","),String(e.id)),onChange:s=>{o({exclusionCategories:x(s,String(e.id))})}},e.id))),v=a()("smb-categories-list",s),f=()=>{const e=y.map((e=>e.count>0&&-1===(0,c.indexOf)(l.split(","),String(e.id))?(0,n.jsxs)("li",{className:"smb-categories-list__item",children:[(0,n.jsxs)("div",{className:"smb-categories-list__item__count",children:[e.count,(0,n.jsx)("span",{children:(0,g.__)("articles","snow-monkey-blocks")})]}),(0,n.jsxs)("div",{className:"smb-categories-list__item__detail",children:[(0,n.jsx)("div",{className:"smb-categories-list__item__category-name",children:e.name}),e.description&&(0,n.jsx)("div",{className:"smb-categories-list__item__category-description",children:e.description}),(0,n.jsx)("div",{className:"smb-categories-list__item__recent-label",children:(0,g.__)("Recent posts","snow-monkey-blocks")}),(0,n.jsx)("ul",{className:"smb-categories-list__item__list",children:(0,n.jsx)("li",{children:(0,g.__)("Only the actual contribution screen is displayed","snow-monkey-blocks")})})]})]},e.id):null)).filter((e=>e));return(0,n.jsx)("div",{className:v,children:(0,n.jsx)("ul",{className:"smb-categories-list__list",ref:h,children:e.filter((e=>e))})})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.InspectorControls,{children:[(0,n.jsx)(d.__experimentalToolsPanel,{label:(0,g.__)("Block settings","snow-monkey-blocks"),children:(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>t!==r.uK.OZ.A,isShownByDefault:!0,label:(0,g.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>o({articles:r.uK.OZ.A}),children:(0,n.jsx)(d.RangeControl,{__nextHasNoMarginBottom:!0,label:(0,g.__)("Categories list articles","snow-monkey-blocks"),value:t,onChange:e=>o({articles:p(e,1,5)}),min:"1",max:"5"})})}),(0,n.jsx)(d.__experimentalToolsPanel,{label:(0,g.__)("Exclusion categories settings","snow-monkey-blocks"),children:(0,n.jsxs)(d.__experimentalToolsPanelItem,{hasValue:()=>l!==r.uK.rE.A,isShownByDefault:!0,label:(0,g.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>o({exclusionCategories:r.uK.rE.A}),children:[(0,n.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,g.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")}),(0,n.jsx)("div",{style:{display:"grid",gap:"16px"},children:(0,n.jsx)(k,{})})]})}),(0,n.jsxs)(d.__experimentalToolsPanel,{label:(0,g.__)("Display order settings","snow-monkey-blocks"),children:[(0,n.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,g.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")}),(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>i!==r.uK.q5.A,isShownByDefault:!0,label:(0,g.__)("orderby","snow-monkey-blocks"),onDeselect:()=>o({orderby:r.uK.q5.A}),children:(0,n.jsx)(d.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,g.__)("orderby","snow-monkey-blocks"),value:i,options:[{label:(0,g.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,g.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,g.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,g.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,g.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>o({orderby:e})})}),(0,n.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>b!==r.uK.fq.A,isShownByDefault:!0,label:(0,g.__)("order","snow-monkey-blocks"),onDeselect:()=>o({order:r.uK.fq.A}),children:(0,n.jsx)(d.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,g.__)("order","snow-monkey-blocks"),value:b,options:[{label:(0,g.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,g.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>o({order:e})})})]})]}),(0,n.jsx)("div",{...(0,u.useBlockProps)(),children:(0,n.jsx)(f,{})})]})},save:function(){return null}})},6942:(e,o)=>{var s;!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(e=l(e,n(s)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var s in e)t.call(e,s)&&e[s]&&(o=l(o,s));return o}function l(e,o){return o?e?e+" "+o:e+o:e}e.exports?(r.default=r,e.exports=r):void 0===(s=function(){return r}.apply(o,[]))||(e.exports=s)}()}},s={};function t(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}};return o[e](n,n.exports,t),n.exports}t.m=o,e=[],t.O=(o,s,r,n)=>{if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],n=e[d][2];for(var i=!0,a=0;a<s.length;a++)(!1&n||l>=n)&&Object.keys(t.O).every((e=>t.O[e](s[a])))?s.splice(a--,1):(i=!1,n<l&&(l=n));if(i){e.splice(d--,1);var c=r();void 0!==c&&(o=c)}}return o}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,r,n]},t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={9804:0,9764:0};t.O.j=o=>0===e[o];var o=(o,s)=>{var r,n,l=s[0],i=s[1],a=s[2],c=0;if(l.some((o=>0!==e[o]))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(a)var d=a(t)}for(o&&o(s);c<l.length;c++)n=l[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var r=t.O(void 0,[9764],(()=>t(3669)));r=t.O(r)})();