(()=>{var e,o={7317:(e,o,s)=>{"use strict";const t=window.wp.blocks,n=JSON.parse('{"UU":"snow-monkey-blocks/categories-list","uK":{"OZ":{"A":5},"rE":{"A":""},"q5":{"A":""},"fq":{"A":""}}}'),r=window.ReactJSXRuntime,l=(0,r.jsxs)("svg",{viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,r.jsx)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"})]});var i=s(6942),a=s.n(i);const c=window.lodash,d=window.wp.components,u=window.wp.blockEditor,_=window.wp.data,p=window.wp.element,m=window.wp.i18n,g=window.wp.compose,b=(e,o=0,s=null)=>(e=Number(e),(isNaN(e)||e<o)&&(e=o),null!==s&&e>s&&(e=s),e),h=window.wp.dataControls,{UU:x}=n,y={articleCategories:{}},w={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,h.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return w.setArticleCategories(e)}},k={*getArticleCategories(){yield w.fetchArticleCategories()}},v=(0,_.createReduxStore)(x,{reducer:(e=y,o)=>"SET_ARTICLE_CATEGORIES"===o.type?{...e,articleCategories:o.articleCategories}:e,actions:w,selectors:{getArticleCategories:e=>e.articleCategories},controls:h.controls,resolvers:k});(0,_.register)(v),(0,t.registerBlockType)(n.UU,{icon:{foreground:"#cd162c",src:l},edit:function({attributes:e,setAttributes:o,className:s}){const{articles:t,exclusionCategories:l,orderby:i,order:h}=e,x=(0,p.useRef)(),y=(0,g.useViewportMatch)("medium","<")?{}:{popoverProps:{placement:"left-start",offset:259}},w=(0,_.useSelect)((e=>e(v).getArticleCategories()));if(!w||!w.length)return(0,r.jsx)("div",{...(0,u.useBlockProps)(),children:(0,r.jsxs)(d.Placeholder,{icon:"editor-ul",label:(0,m.__)("Categories list","snow-monkey-blocks"),children:[(0,r.jsx)(d.Spinner,{}),(0,m.__)("Loading setting data","snow-monkey-blocks")]})});const k=(e,o)=>{let s=[];return null!=l&&(s=l.split(",")),e?s.push(o):s=(0,c.remove)(s,(e=>o!==e)),(0,c.compact)((0,c.union)(s)).join(",")},f=()=>w.map((e=>(0,r.jsx)(d.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.name,value:String(e.id),checked:-1!==(0,c.indexOf)(l.split(","),String(e.id)),onChange:s=>{o({exclusionCategories:k(s,String(e.id))})}},e.id))),j=a()("smb-categories-list",s),C=()=>{const e=w.map((e=>e.count>0&&-1===(0,c.indexOf)(l.split(","),String(e.id))?(0,r.jsxs)("li",{className:"smb-categories-list__item",children:[(0,r.jsxs)("div",{className:"smb-categories-list__item__count",children:[e.count,(0,r.jsx)("span",{children:(0,m.__)("articles","snow-monkey-blocks")})]}),(0,r.jsxs)("div",{className:"smb-categories-list__item__detail",children:[(0,r.jsx)("div",{className:"smb-categories-list__item__category-name",children:e.name}),e.description&&(0,r.jsx)("div",{className:"smb-categories-list__item__category-description",children:e.description}),(0,r.jsx)("div",{className:"smb-categories-list__item__recent-label",children:(0,m.__)("Recent posts","snow-monkey-blocks")}),(0,r.jsx)("ul",{className:"smb-categories-list__item__list",children:(0,r.jsx)("li",{children:(0,m.__)("Only the actual contribution screen is displayed","snow-monkey-blocks")})})]})]},e.id):null)).filter((e=>e));return(0,r.jsx)("div",{className:j,children:(0,r.jsx)("ul",{className:"smb-categories-list__list",ref:x,children:e.filter((e=>e))})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.InspectorControls,{children:[(0,r.jsx)(d.__experimentalToolsPanel,{label:(0,m.__)("Block settings","snow-monkey-blocks"),dropdownMenuProps:y,children:(0,r.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>t!==n.uK.OZ.A,isShownByDefault:!0,label:(0,m.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>o({articles:n.uK.OZ.A}),children:(0,r.jsx)(d.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("Categories list articles","snow-monkey-blocks"),value:t,onChange:e=>o({articles:b(e,1,5)}),min:"1",max:"5"})})}),(0,r.jsx)(d.__experimentalToolsPanel,{label:(0,m.__)("Exclusion categories settings","snow-monkey-blocks"),dropdownMenuProps:y,children:(0,r.jsxs)(d.__experimentalToolsPanelItem,{hasValue:()=>l!==n.uK.rE.A,isShownByDefault:!0,label:(0,m.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>o({exclusionCategories:n.uK.rE.A}),children:[(0,r.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,m.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")}),(0,r.jsx)("div",{style:{display:"grid",gap:"16px"},children:(0,r.jsx)(f,{})})]})}),(0,r.jsxs)(d.__experimentalToolsPanel,{label:(0,m.__)("Display order settings","snow-monkey-blocks"),dropdownMenuProps:y,children:[(0,r.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,m.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")}),(0,r.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>i!==n.uK.q5.A,isShownByDefault:!0,label:(0,m.__)("orderby","snow-monkey-blocks"),onDeselect:()=>o({orderby:n.uK.q5.A}),children:(0,r.jsx)(d.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("orderby","snow-monkey-blocks"),value:i,options:[{label:(0,m.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,m.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,m.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,m.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,m.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>o({orderby:e})})}),(0,r.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>h!==n.uK.fq.A,isShownByDefault:!0,label:(0,m.__)("order","snow-monkey-blocks"),onDeselect:()=>o({order:n.uK.fq.A}),children:(0,r.jsx)(d.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,m.__)("order","snow-monkey-blocks"),value:h,options:[{label:(0,m.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,m.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>o({order:e})})})]})]}),(0,r.jsx)("div",{...(0,u.useBlockProps)(),children:(0,r.jsx)(C,{})})]})},save:function(){return null}})},6942:(e,o)=>{var s;!function(){"use strict";var t={}.hasOwnProperty;function n(){for(var e="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(e=l(e,r(s)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var s in e)t.call(e,s)&&e[s]&&(o=l(o,s));return o}function l(e,o){return o?e?e+" "+o:e+o:e}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(o,[]))||(e.exports=s)}()}},s={};function t(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={exports:{}};return o[e](r,r.exports,t),r.exports}t.m=o,e=[],t.O=(o,s,n,r)=>{if(!s){var l=1/0;for(d=0;d<e.length;d++){for(var[s,n,r]=e[d],i=!0,a=0;a<s.length;a++)(!1&r||l>=r)&&Object.keys(t.O).every((e=>t.O[e](s[a])))?s.splice(a--,1):(i=!1,r<l&&(l=r));if(i){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,n,r]},t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={6769:0,3109:0};t.O.j=o=>0===e[o];var o=(o,s)=>{var n,r,[l,i,a]=s,c=0;if(l.some((o=>0!==e[o]))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(a)var d=a(t)}for(o&&o(s);c<l.length;c++)r=l[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},s=globalThis.webpackChunk=globalThis.webpackChunk||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var n=t.O(void 0,[3109],(()=>t(7317)));n=t.O(n)})();